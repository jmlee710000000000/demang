<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
                  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.pro.demang.mapper.TestMapper">

	<!-- 친구목록 불러오는 쿼리문 -->
	<select id="fList" resultType="org.pro.demang.model.MemberDTO">
		select m.m_email, m.m_nickname
		from followTBL f join memberTBL m where f.followee = m.m_id and
		f.follower = #{follower};
	</select>

	<select id="">

	</select>

	<!-- 회원 번호로 회원 찾기 -->
	<select id="getMember_no"
		resultType="org.pro.demang.model.MemberDTO">select * from memberTBL WHERE m_id = #{no};</select>
	<!-- 회원코드로 회원 찾기 -->
	<select id="getMember_code"
		resultType="org.pro.demang.model.MemberDTO">select * from memberTBL WHERE m_code = #{code};</select>

	<!-- 팔로잉 수, 팔로워 수 (회원번호로) -->
	<select id="followingCount" resultType="Integer">SELECT COUNT(follower)
		from followTBL WHERE follower = #{no}</select>
	<select id="followerCount" resultType="Integer">SELECT COUNT(followee)
		from followTBL WHERE followee = #{no}</select>

	<!-- 해당 번호의 회원의 게시글들(게시글번호만)(최신순) -->
	<select id="getPostList_writer" resultType="Integer">SELECT * FROM postTBL
		WHERE p_writer=#{no} ORDER BY p_id DESC</select>
	<!-- 해당 번호의 회원이 팔로우한 회원들이 쓴 게시글들(게시글번호만)(최신순) -->
	<select id="getPostList_followee" resultType="Integer">
		SELECT p.p_id
		FROM followTBL f
		JOIN postTBL p
		ON f.followee = p.p_writer
		WHERE f.follower = #{no}
		ORDER BY p.p_id DESC;
	</select>


	<!-- 게시글 번호로 게시글 찾기 -->
	<select id="getPost" resultType="org.pro.demang.model.PostDTO">select * from postTBL WHERE p_id
		= #{no};</select>
	<!-- 게시글 번호로 댓글들 찾기 -->
	<select id="getCommentList"
		resultType="org.pro.demang.model.CommentDTO">select * from commentTBL WHERE c_postNo = #{no};</select>

</mapper>